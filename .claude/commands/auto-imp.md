---
description: "自動実行モード - ユーザの指示を仰がずにタスクを完了まで実行"
allowed-tools: ["*"]
argument-hint: "[plan-name] or [task-description]"
---

# 🚀 自動実行フロー

次のルールにしたがって、ユーザ確認なしで実装を完了まで自動実行してください

## 🎯 自動実行原則

### 基本方針

- **ユーザ確認不要**: 計画から完了まで自動実行
- **エラー自動修正**: エラー発生時は自動修正して続行
- **品質基準完全遵守**: CLAUDE.md 絶対遵守
- **完了まで続行**: 全タスク完了まで停止しない

## 📋 自動実行フロー

### 1. 計画自動検出・作成

```bash
# 実行優先順位
1. $ARGUMENTS の計画を実行
2. plans/ の最新計画を実行
3. 計画がなければ TodoWrite で新規計画作成
```

**自動判定ロジック**:

- 計画がある → 即座に実行開始
- 計画がない → タスク内容から自動的に計画作成
- 複雑なタスク → Extended Thinking 自動適用

### 2. TodoWrite 自動管理

**初期化**:

```bash
# タスクを自動的にtodoに分解
- 3ステップ以上の場合は必ずtodo作成
- 優先度自動設定（critical/high/medium/low）
- 完了条件の明確化
```

**進捗自動更新**:

```bash
# リアルタイム自動更新
- タスク開始時: pending → in_progress（自動）
- タスク完了時: in_progress → completed（自動）
- 新規発見時: 新todo自動追加
- 同時実行は1つのin_progressのみ
```

### 5. 実装自動実行

**フェーズ進行**:

```bash
Phase 0: 仕様明確化
  → ドキュメント自動分析
  → 曖昧性自動検出・解決

Phase 1: ドキュメント整合性
  → 関連文書自動確認
  → 不整合自動修正

Phase 2: テスト優先実装
  → テスト自動生成
  → Red状態確認

Phase 3: 実装作業
  → Green状態まで自動実装
  → Refactoring自動実行

Phase 4: 知見記録
  → .claude/への自動記録（@.claude/commands/learnings.md を参照）
  → パターン自動抽出
```

### 6. コミット自動実行

**コミット判定**:

```bash
# 自動コミット条件
if 品質チェック == ALL_PASS:
    if 論理的完結:
        git add 対象ファイル
        git commit -m "自動生成メッセージ"
```

**メッセージ自動生成**:

```bash
# コミットメッセージテンプレート
"[タイプ]: [要約]

- [変更内容1]
- [変更内容2]
- [影響範囲]

🤖 Auto-generated by Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>"
```

### 7. 知見自動記録

**記録タイミング**:

```bash
# 重要事項検出時に自動記録
- 新パターン発見時
- エラー解決時
- パフォーマンス改善時
- セキュリティ修正時
```

**記録先自動判定**:

@.claude/commands/learnings.md を参照

## 🔄 統合自動実行コマンド

### 完全自動実行

```bash
# 開始から完了まで全自動
1. 計画確認・作成（自動）
2. TodoWrite初期化（自動）
3. 実装サイクル（自動）
   - in_progress化
   - 実装実行
   - 品質チェック
   - エラー修正
   - completed化
4. 知見記録（自動）
5. コミット実行（自動）
6. 完了確認（自動）
```

## ⚡ 高速化テクニック

### 並列実行

```bash
# 独立タスクは並列化
- ドキュメント更新
- テスト実装
- リファクタリング
```

### キャッシュ活用

```bash
# 結果キャッシュ
- 品質チェック結果
- テスト結果
- ビルド成果物
```

### スキップ可能項目

```bash
# 条件付きスキップ（自動判定）
- 変更なしファイルのチェック
- 成功済みテストの再実行
- 同一内容の再フォーマット
```

## 🎬 実行開始

このコマンドを実行すると、以下が自動的に行われます：

1. **計画検出・作成**: $ARGUMENTS または active 計画を自動検出
2. **TODO 管理**: タスクを自動的に todo に分解・管理
3. **品質保証**: 各段階で品質チェック自動実行
4. **エラー修正**: 検出されたエラーを自動修正
5. **実装実行**: TDD に基づく自動実装
6. **知見記録**: 重要事項を.claude/に自動記録
7. **コミット**: 品質基準クリア後に自動コミット
8. **完了報告**: 全タスク完了を自動確認・報告

## ✅ 完了条件

### 自動完了判定

```markdown
# 全項目が true で完了

- [ ] 全 todo が completed
- [ ] 品質チェック 0 エラー
- [ ] テストカバレッジ 75%以上
- [ ] ドキュメント更新完了
- [ ] 知見記録完了
- [ ] コミット成功
```

### 完了時の自動アクション

```markdown
1. 成果物サマリー生成
2. 実行ログ保存
3. 次のタスク提案
4. PR 作成準備
```

## 🚨 緊急停止条件

以下の場合のみ自動実行を停止：

- セキュリティ脆弱性検出（S\*\*\*エラー）
- データ破壊リスク検出
- 本番環境への誤操作リスク
- 回復不可能なエラー発生

それ以外は全て自動修正して続行します。

---

**注意**: このコマンドは完全自動実行モードです。開始後はタスク完了まで停止しません。
